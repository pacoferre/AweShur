<link rel="import" href="../lib/polymer/polymer.html">
<link rel="import" href="../AWSLib/awsl-control-behavior">

<script>
    var AWSLBehaviors = AWSLBehaviors || {};

    (function () {
        AWSLBehaviors.SelectorBehaviorImpl = {
            properties: {
                listName: {
                    type: String,
                },
                label: {
                    type: String,
                },
                listItems: {
                    type: Array,
                    value: function () { return []; }
                },
            },
            setListItem: function (fromServer) {
                if (fromServer.listItems != null && this.listName != "") {
                    this.listItems = fromServer.listItems[this.listName];
                }
            },
            getData : function (fromServer) {
                var name = this.dataField;

                if (name != null) {
                    var value = fromServer.data[name];

                    if (!this.value || this.value.toString().trim() != value) {

                        if (this.listItems.length == 0)
                        {
                            this.fire('getlist', { listName: this.listName });
                        }

                        this.value = value;
                    }
                }
            },
            setData: function (toServer) {
                var name = this.dataField;

                if (name != null) {
                    toServer.data[name] = this.value;
                }
            }
        };

        AWSLBehaviors.SelectorBehavior = [AWSLBehaviors.ControlBehavior, AWSLBehaviors.SelectorBehaviorImpl]
    })();
</script>
