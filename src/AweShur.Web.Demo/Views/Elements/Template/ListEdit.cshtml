@{
    bool error = false;
    string msgError = "";
    AweShur.Web.Demo.Views.Elements.CRUDLocations.CRUDLocationItem item = null;
    int? idappuser = AppUser.IDAppUser(Context);

    try
    {
        string eref = this.Context.Request.Query["e"].NoNullString();

        if (eref == "")
        {
            throw new Exception("Query parameter 'e' missing");
        }
        else
        {
            item = AweShur.Web.Demo.Views.Elements.CRUDLocations.Item(eref);
        }
    }
    catch(Exception exp)
    {
        error = true;
        msgError = exp.ToString();
    }

    Layout = "";
}
<link rel="import" href="/lib/polymer/polymer.html">
<link rel="import" href="/elements/lib/awsl-listeditor/awsl-listeditor.html">

<dom-module id="@item.componentName">
    <template>
        @if (error)
        {
            <div>@msgError</div>
        }
        else
        {
            <awsl-listeditor oname="[[oname]]" route="{{route}}" path="[[name]]" title="" id="le"
                listhref='@(item.listhref + "/" + idappuser)' listelement="@item.listelement"
                edithref='@(item.edithref + "/" + idappuser)' editelement="@item.editelement"></awsl-listeditor>
        }
    </template>
    <script>
    Polymer({
        is: '@item.componentName',
        properties: {
            oname: {
                type: String
            },
            route: {
                type: Object,
                notify: true
            }
        },
        refresh: function()
        {
            this.$.le.refresh();
        }
    });
    </script>
</dom-module>
